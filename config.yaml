# Use forward slashes or double backslashes for Windows paths
input_video: "path/to/video"
chunks_directory: "chunks"  # Will contain HR and LR subfolders

# Chunk settings
chunk_strategy: "duration"  # Options: "duration", "scene_detection", "frame_count"
frames_per_chunk: 5  # Number of frames per chunk (used if chunk_strategy is "frame_count")
chunk_duration: 5  # Duration in seconds (used if chunk_strategy is "duration")
min_chunk_duration: 1  # Minimum chunk duration for scene detection

# Scene detection parameters
scene_detection:
  threshold: 30  # Threshold for content detector
  split_preset: "slow"  # FFmpeg preset for splitting (fast, medium, slow)
  strip_audio: true  # Whether to remove audio from output chunks

# Logging configuration
logging:
  directory: "logs"
  filename: "degradation.log"
  level: "INFO"
  console_format: "%(message)s"
  file_format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# Degradation pipeline configuration
# Rearrange these to change the order they're applied in. Do NOT move "codec" however
degradations:
  - name: "resize"
    enabled: true
    probability: 1
    params:
      fixed_scale: 0.5
      down_up:
        enabled: true
        range: [0.5, 0.8]  # [min, max] downscale factors
      scaling_filters: ["bilinear", "bicubic", "lanczos", "neighbor", "area"]

  # This is a basic sharpening filter using unsharp mask, nothing more. Do not try to use it to simulate halos found on DVDs
  - name: "halo"
    enabled: true
    probability: 0.4
    params:
      luma_x_range: [3, 5]      # Matrix size for x dimension | Min = 3 Max = 5
      luma_y_range: [3, 5]      # Matrix size for y dimension
      luma_amount_range: [1.0, 3.0]  # Strength of the effect

  - name: "blur"
    enabled: true
    probability: 0.1
    params:
      enabled_types: ["gaussian", "box", "motion"]
      gaussian:
        sigma_range: [1.0, 3.0]
        steps_range: [1, 3]
      box:
        radius_range: [1, 3]
        power_range: [1, 2]
      motion:
        frames_range: [1, 2]
        angle_range: [0, 0]

  # This is a very very basic ghosting effect, it needs to be customized by someone who understands ghosting issues on DVDs. Not worth using currently
  - name: "ghosting"
    enabled: false
    probability: 0.1
    params:
      num_ghosts_range: [1, 2]
      opacity_range: [0.05, 0.15]
      delay_range: [1, 2]
      offset_x_range: [-3, 3]
      offset_y_range: [-2, 2]
      enable_color_shift: true

  # Must remain enabled. For high quality output, just set a modern codec at reasonable settings
  - name: "codec"
    enabled: true
    probability: 1.0
    params:
      h264:
        probability: 0.5
        quality_range: [18, 28]  # [min, max] CRF values
      h265:
        probability: 0.25
        quality_range: [20, 30]
      vp9:
        probability: 0
        quality_range: [18, 28]
      av1:
        probability: 0.10
        quality_range: [25, 45]
      mpeg2:
        probability: 0.15
        quality_range: [1, 7]  # qscale: 1-31, lower is better
